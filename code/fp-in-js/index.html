<!DOCTYPE html><html lang=""><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:125%/1.4 'Fira Sans',sans-serif;box-sizing:border-box;overflow-y:scroll;-webkit-font-smoothing:antialiased;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.87);font-family:'Fira Sans',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";letter-spacing:.03em;}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;color:inherit;font-family:'Fira Mono',monospace;font-weight:400;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;color:inherit;font-family:'Fira Mono',monospace;font-weight:400;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;color:inherit;font-family:'Fira Mono',monospace;font-weight:400;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;color:inherit;font-family:'Fira Mono',monospace;font-weight:400;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;color:inherit;font-family:'Fira Mono',monospace;font-weight:400;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;color:inherit;font-family:'Fira Mono',monospace;font-weight:400;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}ul{margin-left:1.4rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.4rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;font-size:0.85rem;line-height:1.4rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;font-size:1rem;line-height:1.4rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}blockquote{margin-left:-1.4rem;margin-right:1.4rem;margin-top:0;padding-bottom:0;padding-left:1.1375rem;padding-right:0;padding-top:0;margin-bottom:1.4rem;font-size:1.1487rem;line-height:1.4rem;color:hsla(0,0%,0%,0.6);border-left:0.2625rem solid hsla(0,0%,0%,0.87);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.4rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.4rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.4rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.4rem;margin-bottom:calc(1.4rem / 2);margin-top:calc(1.4rem / 2);}li > ul{margin-left:1.4rem;margin-bottom:calc(1.4rem / 2);margin-top:calc(1.4rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.4rem / 2);}code{font-size:0.85rem;line-height:1.4rem;}kbd{font-size:0.85rem;line-height:1.4rem;}samp{font-size:0.85rem;line-height:1.4rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.93333rem;padding-right:0.93333rem;padding-top:0.7rem;padding-bottom:calc(0.7rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:inherit;}a:hover{color:#3498DB;}@media only screen and (max-width:480px){blockquote{margin-left:-1.05rem;padding-left:0.7875rem;margin-right:0;}}</style><style data-href="/styles.9a7fb004f15afd16ed1f.css">@font-face{font-family:Fira Mono;font-style:normal;font-display:swap;font-weight:400;src:local("Fira Mono Regular "),local("Fira Mono-Regular"),url(/static/fira-mono-latin-400-e3ae866ff2823372c9e3aaadebbd8db2.woff2) format("woff2"),url(/static/fira-mono-latin-400-452f020811cb7c0d8e4c7a8565279552.woff) format("woff")}@font-face{font-family:Fira Mono;font-style:normal;font-display:swap;font-weight:500;src:local("Fira Mono Medium "),local("Fira Mono-Medium"),url(/static/fira-mono-latin-500-e8330ccb5d46418d07df67a12e125315.woff2) format("woff2"),url(/static/fira-mono-latin-500-619d297444f7231cb1e2c2e90e460063.woff) format("woff")}@font-face{font-family:Fira Mono;font-style:normal;font-display:swap;font-weight:700;src:local("Fira Mono Bold "),local("Fira Mono-Bold"),url(/static/fira-mono-latin-700-88eb04d0e7cd2ef944219997d022085f.woff2) format("woff2"),url(/static/fira-mono-latin-700-dfbd25650dfa16dc45d8d6e57bbf13cf.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:normal;font-display:swap;font-weight:100;src:local("Fira Sans Thin "),local("Fira Sans-Thin"),url(/static/fira-sans-latin-100-8ae7c3ebc15feef69bf85f4f06bad0cc.woff2) format("woff2"),url(/static/fira-sans-latin-100-64ef5d921ec1610d288cb05687dd6ff8.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:italic;font-display:swap;font-weight:100;src:local("Fira Sans Thin italic"),local("Fira Sans-Thinitalic"),url(/static/fira-sans-latin-100italic-7ea7f783efe3b134a4d928ccaa352d33.woff2) format("woff2"),url(/static/fira-sans-latin-100italic-cad781966dba6abbbb7f4dbc101deff5.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:normal;font-display:swap;font-weight:200;src:local("Fira Sans Extra Light "),local("Fira Sans-Extra Light"),url(/static/fira-sans-latin-200-5dfe5bb8504d18220e1ec85ba0b9a7bf.woff2) format("woff2"),url(/static/fira-sans-latin-200-3759dc28fbca2bbc54f917b702c9ad19.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:italic;font-display:swap;font-weight:200;src:local("Fira Sans Extra Light italic"),local("Fira Sans-Extra Lightitalic"),url(/static/fira-sans-latin-200italic-50b37736f5fd3a3f681e7a0bea416cb9.woff2) format("woff2"),url(/static/fira-sans-latin-200italic-ac01e2f33b924718a5594ea38a96947e.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:normal;font-display:swap;font-weight:300;src:local("Fira Sans Light "),local("Fira Sans-Light"),url(/static/fira-sans-latin-300-2a17d20591fff7b8e288846c09d8dd96.woff2) format("woff2"),url(/static/fira-sans-latin-300-e98236c8d464a03df3a46bb09b8a5166.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:italic;font-display:swap;font-weight:300;src:local("Fira Sans Light italic"),local("Fira Sans-Lightitalic"),url(/static/fira-sans-latin-300italic-83f9042f28d1e42ad42b087ee97ecb41.woff2) format("woff2"),url(/static/fira-sans-latin-300italic-c583c57a3d3ac870298d00715b4c51c8.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:normal;font-display:swap;font-weight:400;src:local("Fira Sans Regular "),local("Fira Sans-Regular"),url(/static/fira-sans-latin-400-ffc57646d87fb4d1be1b97e08e2d00a8.woff2) format("woff2"),url(/static/fira-sans-latin-400-491b04b10551f172aa6c9ba3a90929c6.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:italic;font-display:swap;font-weight:400;src:local("Fira Sans Regular italic"),local("Fira Sans-Regularitalic"),url(/static/fira-sans-latin-400italic-ac9431d40b5fbd337d49ac18266bd6a3.woff2) format("woff2"),url(/static/fira-sans-latin-400italic-92d6bf99e3e3401c3e705bc4ac67ca50.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:normal;font-display:swap;font-weight:500;src:local("Fira Sans Medium "),local("Fira Sans-Medium"),url(/static/fira-sans-latin-500-d7b9cfe2a8790e1b898ec1361a0f134d.woff2) format("woff2"),url(/static/fira-sans-latin-500-86206664d95816273e2c93321ba322f1.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:italic;font-display:swap;font-weight:500;src:local("Fira Sans Medium italic"),local("Fira Sans-Mediumitalic"),url(/static/fira-sans-latin-500italic-de3e8ca7e3ea45f7ba99772ef3aadb8d.woff2) format("woff2"),url(/static/fira-sans-latin-500italic-55380eb66755425f08701de54fd7d36c.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:normal;font-display:swap;font-weight:600;src:local("Fira Sans SemiBold "),local("Fira Sans-SemiBold"),url(/static/fira-sans-latin-600-d169a7cab59390e23b47176603128627.woff2) format("woff2"),url(/static/fira-sans-latin-600-9984ceafd344777a88676d9b1930d799.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:italic;font-display:swap;font-weight:600;src:local("Fira Sans SemiBold italic"),local("Fira Sans-SemiBolditalic"),url(/static/fira-sans-latin-600italic-09c31355584338dd7244ca9e61ad26c2.woff2) format("woff2"),url(/static/fira-sans-latin-600italic-a64c67a5fd9b5a9d9fb969d71b5428bf.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:normal;font-display:swap;font-weight:700;src:local("Fira Sans Bold "),local("Fira Sans-Bold"),url(/static/fira-sans-latin-700-eb271b543fef7ac7fd7a8d7ab5f3adcd.woff2) format("woff2"),url(/static/fira-sans-latin-700-4921abc7924f03ff2fe3843372a4af71.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:italic;font-display:swap;font-weight:700;src:local("Fira Sans Bold italic"),local("Fira Sans-Bolditalic"),url(/static/fira-sans-latin-700italic-a8a81920784d34ab8e317e89e7f3c21b.woff2) format("woff2"),url(/static/fira-sans-latin-700italic-406af0be8d25cb5d6f66d5275fa6dba5.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:normal;font-display:swap;font-weight:800;src:local("Fira Sans ExtraBold "),local("Fira Sans-ExtraBold"),url(/static/fira-sans-latin-800-3dd887ae053db25d81c1d8819dcb2f39.woff2) format("woff2"),url(/static/fira-sans-latin-800-ea51ab605e4674508d1deb7133f49d4b.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:italic;font-display:swap;font-weight:800;src:local("Fira Sans ExtraBold italic"),local("Fira Sans-ExtraBolditalic"),url(/static/fira-sans-latin-800italic-6c6352cc9e276c22564c7eca9bbbac04.woff2) format("woff2"),url(/static/fira-sans-latin-800italic-cb8edeb38db6b613d7714af38d38cb0b.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:normal;font-display:swap;font-weight:900;src:local("Fira Sans Black "),local("Fira Sans-Black"),url(/static/fira-sans-latin-900-3505dd68b262c11f53d59d024f252449.woff2) format("woff2"),url(/static/fira-sans-latin-900-985a68f9c0e267ffa169839d3700a3e4.woff) format("woff")}@font-face{font-family:Fira Sans;font-style:italic;font-display:swap;font-weight:900;src:local("Fira Sans Black italic"),local("Fira Sans-Blackitalic"),url(/static/fira-sans-latin-900italic-cd4975987a4791f4ba80f22c3a259ef1.woff2) format("woff2"),url(/static/fira-sans-latin-900italic-961d754a08a6cba7e955da2a254fe3db.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#073642}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}:root{--a-dark:#191308;--a-cold:#003249;--a-dark-warm:#372248;--a-warm:#ba1f33;--a-light:#eaeaea;--a-dark-1:#171208;--a-cold-1:#002e43;--a-dark-warm-1:#321f42;--a-warm-1:#aa1d2f;--a-light-1:#d5d5d5;--b-dark:#11001c;--b-dark-warm:#270722;--b-cold:#4f6367;--b-green:#498467;--b-light:#98b6b1;--c-dark:#070707;--c-dark-cold-2:#0d1f2d;--c-dark-cold-1:#084c61;--c-dark-cold-grey:#413f54;--c-cool:#177e89;--c-dark-neutral:#362417;--c-dark-warmer:#321325;--c-warm:#a50104;--c-neutral:#849483;--c-warning:#fcba04;--c-light-1:#d9dbf1;--c-light:#f7f7ff}.my-figure *>img{margin-bottom:0}.my-figure>figcaption{text-align:center;font-style:italic;font-weight:light}</style><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><title data-react-helmet="true">(Don&#x27;t) write FP in JS | Jean-Louis Leysens</title><meta data-react-helmet="true" name="description" content="Write FP in JSI enjoy the teachings and precepts of Functional Programming (FP). I enjoy the
simplicity of it. It tends to force you to think of one thing at a…"/><meta data-react-helmet="true" property="og:title" content="(Don&#x27;t) write FP in JS"/><meta data-react-helmet="true" property="og:description" content="Write FP in JSI enjoy the teachings and precepts of Functional Programming (FP). I enjoy the
simplicity of it. It tends to force you to think of one thing at a…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Jean-Louis Leysens"/><meta data-react-helmet="true" name="twitter:title" content="(Don&#x27;t) write FP in JS"/><meta data-react-helmet="true" name="twitter:description" content="Write FP in JSI enjoy the teachings and precepts of Functional Programming (FP). I enjoy the
simplicity of it. It tends to force you to think of one thing at a…"/><meta data-react-helmet="true" name="keywords" content="sombrerob.ro, sombrerobro, jloleysens, JeanLouis, Jean-Louis, Leysens, blog"/><meta name="generator" content="Gatsby 2.4.3"/><link href="//fonts.googleapis.com/css?family=Patua+One:400|Cabin+Condensed:400,700" rel="stylesheet" type="text/css"/><link as="script" rel="preload" href="/component---src-templates-blog-post-tsx-f2dd12a507c6c5b6f2bb.js"/><link as="script" rel="preload" href="/0-000e8f0d412667a53f4f.js"/><link as="script" rel="preload" href="/app-850f29d0cb9c72260c45.js"/><link as="script" rel="preload" href="/styles-3e8bb5c38978f369733f.js"/><link as="script" rel="preload" href="/webpack-runtime-578a59ddec7e236b767d.js"/><link as="fetch" rel="preload" href="/static/d/816/path---code-fp-in-js-f-9-b-d58-lc7oExJa8dAkedE0TXu0rrdrI.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div><header class="sc-bwzfXH eVzlhg"><h3 style="display:flex;align-self:center;margin-left:0.7rem;margin-right:0.7rem;margin-top:0;color:var(--a-light)"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/">J<span style="font-family:sans-serif">λ</span>O</a></h3></header><main class="sc-ifAKCX kRiXtM"><a style="font-size:2.1rem;position:fixed;top:120px;transform:translateX(-100px)" href="/code">&lt;</a><h1>(Don&#x27;t) write FP in JS</h1><p style="font-size:0.87055rem;line-height:1.4rem;display:block;margin-bottom:1.4rem;margin-top:-1.4rem">June 01, 2020</p><div style="font-size:0.8409rem;line-height:1.4rem;text-align:justify"><h2>Write FP in JS</h2>
<p>I enjoy the teachings and precepts of Functional Programming (FP). I enjoy the
simplicity of it. It tends to force you to think of one thing at a time. A
quote that unlocked the power of FP for me is by Alan J. Perlis, as stated in
Clojure’s rationale<sup>1</sup>:</p>
<blockquote>
<p>It is better to have 100 functions operate on one data structure than to have
10 functions operate on 10 data structures.</p>
</blockquote>
<p>This idea, for me, shook the world of Object Oriented Programming (OOP). OOP
was not rendered without use, but there is certainly something to these
composable units (functions) that understand a shared interface. Something that
makes me hesitate to reach for object inheritance patterns and writing my own
APIs. Interfaces like arrays or lists. These are extremely simple data
structures that know nothing about your business logic. When we start creating
our own functions that operate on arrays and return arrays we quickly gain the
ability to express different sequences of higher-level <em>operations</em> instead of
higher level <em>things</em>. See Doug McIlroy’s solution to the problem of finding
the frequency of different words in a text file<sup>2</sup>.</p>
<p>All of this is possible in JS - as in many other languages. What
makes it even more pleasant to write in JS is that functions are first-class
values in the same way that objects or numbers are. This means we can write
functions that take functions as arguments — a pattern that is used
extensively in many applications to solve different problems.</p>
<p>Taking the teachings of FP a step further we can create law-abiding functions.
This is a more extreme version<sup>3</sup> of the idea I stated earlier about shared
interfaces<sup>4</sup>. These laws mean that we can reason about the flow of
our functions in a way that is analagous to mathematic formlae. This also leans
into thinking about our functions a type level; give me a number (a type) and I
will return a string (another type). I will leave further investigations into category
theory to the reader as it is beyond the scope of this article (enjoy
puzzle solving instead of problem solving!).</p>
<p>At this point I would emphasise that all of the above is why we should almost
certainly choose for FP in JS. Why choose complexity (or complectedness) when
simplicity is not only feasible but desirable? This is something FP can
offer. What is more, there are theoretical or academic aspects to what I have
mentioned but an enormous amount of practical usefulness too. JS libraries like
<a href="https://lodash.com/">lodash</a><sup>5</sup> and <a href="https://ramdajs.com/">ramda</a> have
demonstrated this usefulness in many real-world applications.</p>
<h2>Don’t write FP in JS</h2>
<p>Consider the following reasons you should absolutely not write FP in JS. I
would like to explore two reasons, but in reality they are linked and are utter
defeaters for FP in JS today.</p>
<h3>Tail call optimization (TCO)</h3>
<p>The reality is that JS is not a language that is optimised for all things FP.
For instance, FP makes heavy use of calling functions inside of functions.
Sometimes as a mechanism of iteration known as recursion. In a large number of
cases this is fine but in some cases this is totally not fine and will cause
your program to unexpectedly break.</p>
<p>The reason your program will break is due to optimization. More specifically,
lack of FP optimization in how JS is built. This is not something you can code
around. It is woven into the very fabric of what JS <em>is</em> today. JavaScript is
not a compiled<sup>6</sup> or a TCO language. Even though much
work has been done in browsers and other runtimes to mitigate this, in the year
2020 it is still possible to blow the call stack. What does this mean? Well, in
simple terms your program asks for more memory than is available to it because
your implementation does not follow the JS rules™. The stack depth is of finite
size, but the size is dependant upon the machine your JS runtime is running on.
You can not know in all cases how far you are permitted to go. If you choose to
implement this mechanism your code is instantly buggy. <strong>It will break</strong>. Okay, I
have overstated the case slightly, it will break under certain conditions.
If you know that the data over which you are recursing will <em>never</em> grow the
stack beyond, say, 10 levels deep, you are in the clear. When you do not know
how deep the stack may get you are in treachorous waters<sup>7</sup>.</p>
<h3>Immutability (or lack thereof)</h3>
<p>Another, and quite pressing reason to not go whole-hog FP in JS is because many
native data structures are not immutable. Consider this code:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> myObject <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">myFunction</span><span class="token punctuation">(</span>myObject<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { a: 42 }</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>For someone who writes code in a language optimized for FP this may be a shock,
but to many others this may not be. The fact is objects, arrays and functions
are passed around as values which can be changed in an in-place way. This means
a change is visible to anyone with a reference to that value. This
violates the simplicity provided by functional purity. In order fix this we must
explicity copy our values. Like so: </p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> myObject <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> myNewObject <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>obj<span class="token punctuation">,</span> a<span class="token punctuation">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">myFunction</span><span class="token punctuation">(</span>myObject<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { a: 1 }</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Problem solved! However, the problem is actually not sovled for many cases when
we have objects inside objects inside objects inside arrays. “Luckily” strings
and numbers are immutable. So to preserve the copying behaviour we so happily
acheived before we would need to do this:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> originalObject <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token punctuation">{</span> b<span class="token punctuation">:</span> <span class="token punctuation">{</span> c<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> d<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> e<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">}</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> copyThatChangedD <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>originalObject<span class="token punctuation">,</span>
  a<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>originalObject<span class="token punctuation">.</span>a<span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>originalObject<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b<span class="token punctuation">,</span>
      c<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span> <span class="token operator">...</span>originalObject<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>d<span class="token punctuation">,</span> d<span class="token punctuation">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span>originalObject<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Immutable facade restored! There are many programmatic implementations that
were made to solve this very problem. But consider the case when we do not
always know how deep our data structure may be. We are back to the problem of
optimization I mentioned before because we will need to recurse! For
larger object structures, we can quickly incur a large performance cost and risk blowing
the stack again.</p>
<p>There are many users of the web out there happily running old Android devices or
other low-memory environments which will not be able to handle the memory
footprint created by forcing native JS structures to be immutable.</p>
<h2>Closing thoughts</h2>
<p>There may be other cases where FP in JS is a bad fit, but I have tried to touch
on what I believe to the most problematic areas at present. So do we abandon
the FP in JS project? Definitely not! My advice is to be cautious when
implementing FP in JS. Think carefully about the environment in which your code
will run given the constraints in place. Use mutation to your advantage, it is
a truly powerful tool and your only saving grace for low(er)-memory devices
accessing your website or sending data to your JS server.</p>
<p>Again, do not abandon FP in JS. It is a truly powerful tool that can help
create a simpler code base and it has a truly amazing friend in JS.
Unfortunately there are operational concerns that mean you will need to be a
cautious and pragmatic FP in JS programmer today. Well, actually, always be
pragmatic, please!</p>
<h3>Notes</h3>
<ol>
<li>Listed as one of the points
<a href="https://clojure.org/about/rationale#_object_orientation_is_overrated">here</a>.</li>
<li>See <a href="https://youtu.be/AkYDsiRVqno?t=875">this</a> section (roughly 2 minutes long) of a talk by Stefan
Tilkov. With special focus on the implementation by Donald Knuth vs Doug McIlroy.</li>
<li>Today, at time of writing, I would argue pathologically extreme.</li>
<li>See a library like <a href="https://github.com/gcanti/fp-ts">fp-ts</a>.</li>
<li>Please do not add this entire library as a dependency in new projects. There
are many security vulnerabilities that come with it and much of it’s
functionality has since been made available through JS natively.</li>
<li>TypeScript is a <em>transpiler</em> not a <em>compiler</em> even though it may perform
tasks that are similar to a compiler.</li>
<li>I have run into this very issue using a library like <a href="https://github.com/immerjs/immer">immer</a>.</li>
</ol></div><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/code/todo/">← <!-- -->TODO</a></li><li><a rel="next" href="/code/most-important/">The most important thing a programmer does<!-- --> →</a></li></ul><hr style="margin-top:0.7rem;margin-bottom:1.4rem"/><div direction="column" style="margin-bottom:3.5rem" class="sc-bZQynM bxVNwp"><div class="sc-gzVnrw tDqEr"><p>Hi, I&#x27;m <strong>Jean-Louis Leysens</strong>. I like writing software in JavaScript and TypeScript and listening to noisey music.</p></div><div class="sc-gzVnrw tDqEr"><span role="img"><a target="_blank" href="https://www.github.com/jloleysens"><svg width="1rem" height="1rem" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="sc-EHOje bCJifS"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z" transform="scale(64)"></path></svg></a></span><div style="margin-left:1.4rem"></div><a style="font-size:0.8rem" href="/pgp-public.txt.asc" download="">My public PGP key</a></div></div></main></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-65971085-2', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-tsx","jsonName":"code-fp-in-js-f9b","path":"/code/fp-in-js/"};window.dataPath="816/path---code-fp-in-js-f-9-b-d58-lc7oExJa8dAkedE0TXu0rrdrI";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-850f29d0cb9c72260c45.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-04c293685663208ec60c.js"],"component---src-templates-blog-post-tsx":["/component---src-templates-blog-post-tsx-f2dd12a507c6c5b6f2bb.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-c06a54614519d315c95c.js"],"component---src-pages-code-tsx":["/component---src-pages-code-tsx-92ce86f77fc06d20b68f.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-471173cedf884b690ca3.js"],"component---src-pages-music-tsx":["/component---src-pages-music-tsx-d0adc0f08dd195d0d1aa.js"],"component---src-pages-video-games-tsx":["/component---src-pages-video-games-tsx-3d61cd4b9cb7644892ef.js"],"pages-manifest":["/pages-manifest-7089550e8f9c0e9fa8e5.js"]};/*]]>*/</script><script src="/webpack-runtime-578a59ddec7e236b767d.js" async=""></script><script src="/styles-3e8bb5c38978f369733f.js" async=""></script><script src="/app-850f29d0cb9c72260c45.js" async=""></script><script src="/0-000e8f0d412667a53f4f.js" async=""></script><script src="/component---src-templates-blog-post-tsx-f2dd12a507c6c5b6f2bb.js" async=""></script></body></html>